{"ast":null,"code":"import axios from 'axios';\nimport history from '../history'; //ACTION TYPES\n\nvar LOGIN_USER = 'LOGIN_USER';\nvar REGISTER_USER = 'REGISTER_USER'; //ACTION CREATORS\n\nvar loginUser = function loginUser(user) {\n  return {\n    type: LOGIN_USER,\n    user: user\n  };\n};\n\nvar registerUser = function registerUser(newUser) {\n  return {\n    type: REGISTER_USER,\n    newUser: newUser\n  };\n}; //THUNK CREATORS\n\n\nexport var login = function login(user) {\n  return function (dispatch) {\n    axios.post('/api/login', user).then(function (res) {\n      return res.data;\n    }).then(function (user) {\n      dispatch(loginUser(user));\n      history.push(\"/users/\".concat(user.id, \"/entries\"));\n    }, function (authError) {\n      dispatch(loginUser({\n        error: authError\n      }));\n    }).catch(console.error);\n  };\n};\nexport var register = function register(newUser) {\n  return function (dispatch) {\n    axios.post('/api/register', newUser).then(function (res) {\n      return res.data;\n    }).then(function (user) {\n      dispatch(registerUser(user));\n      history.push(\"/users/\".concat(user.id, \"/entries\"));\n    }).catch(console.error);\n  };\n}; //REDUCER\n\nexport default function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case LOGIN_USER:\n      return action.user;\n\n    case REGISTER_USER:\n      return action.newUser;\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/Users/palina/work/journal-app/client/src/store/auth.js"],"names":["axios","history","LOGIN_USER","REGISTER_USER","loginUser","user","type","registerUser","newUser","login","dispatch","post","then","res","data","push","id","authError","error","catch","console","register","state","action"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,YAApB,C,CAEA;;AACA,IAAMC,UAAU,GAAG,YAAnB;AACA,IAAMC,aAAa,GAAG,eAAtB,C,CAEA;;AACA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAAAC,IAAI;AAAA,SAAK;AAACC,IAAAA,IAAI,EAAEJ,UAAP;AAAmBG,IAAAA,IAAI,EAAJA;AAAnB,GAAL;AAAA,CAAtB;;AAEA,IAAME,YAAY,GAAG,SAAfA,YAAe,CAAAC,OAAO;AAAA,SAAK;AAACF,IAAAA,IAAI,EAAEH,aAAP;AAAsBK,IAAAA,OAAO,EAAPA;AAAtB,GAAL;AAAA,CAA5B,C,CAEA;;;AACA,OAAO,IAAMC,KAAK,GAAG,SAARA,KAAQ,CAACJ,IAAD,EAAU;AAC3B,SAAO,UAAAK,QAAQ,EAAI;AACjBV,IAAAA,KAAK,CAACW,IAAN,CAAW,YAAX,EAAyBN,IAAzB,EACGO,IADH,CACQ,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACC,IAAR;AAAA,KADX,EAEGF,IAFH,CAEQ,UAAAP,IAAI,EAAI;AACVK,MAAAA,QAAQ,CAACN,SAAS,CAACC,IAAD,CAAV,CAAR;AACAJ,MAAAA,OAAO,CAACc,IAAR,kBAAuBV,IAAI,CAACW,EAA5B;AACH,KALH,EAKM,UAAAC,SAAS,EAAI;AACbP,MAAAA,QAAQ,CAACN,SAAS,CAAC;AAACc,QAAAA,KAAK,EAAED;AAAR,OAAD,CAAV,CAAR;AACH,KAPH,EAQGE,KARH,CAQSC,OAAO,CAACF,KARjB;AASD,GAVD;AAWH,CAZM;AAcP,OAAO,IAAMG,QAAQ,GAAG,SAAXA,QAAW,CAACb,OAAD,EAAa;AACjC,SAAO,UAAAE,QAAQ,EAAI;AACjBV,IAAAA,KAAK,CAACW,IAAN,CAAW,eAAX,EAA4BH,OAA5B,EACGI,IADH,CACQ,UAAAC,GAAG;AAAA,aAAIA,GAAG,CAACC,IAAR;AAAA,KADX,EAEGF,IAFH,CAEQ,UAAAP,IAAI,EAAI;AACZK,MAAAA,QAAQ,CAACH,YAAY,CAACF,IAAD,CAAb,CAAR;AACAJ,MAAAA,OAAO,CAACc,IAAR,kBAAuBV,IAAI,CAACW,EAA5B;AACD,KALH,EAMGG,KANH,CAMSC,OAAO,CAACF,KANjB;AAOD,GARD;AASH,CAVM,C,CAYP;;AACA,eAAe,YAA8B;AAAA,MAApBI,KAAoB,uEAAZ,EAAY;AAAA,MAARC,MAAQ;;AACzC,UAAQA,MAAM,CAACjB,IAAf;AACI,SAAKJ,UAAL;AACI,aAAOqB,MAAM,CAAClB,IAAd;;AACJ,SAAKF,aAAL;AACI,aAAOoB,MAAM,CAACf,OAAd;;AACJ;AACI,aAAOc,KAAP;AANR;AAQH","sourcesContent":["import axios from 'axios';\nimport history from '../history';\n\n//ACTION TYPES\nconst LOGIN_USER = 'LOGIN_USER';\nconst REGISTER_USER = 'REGISTER_USER';\n\n//ACTION CREATORS\nconst loginUser = user => ({type: LOGIN_USER, user});\n\nconst registerUser = newUser => ({type: REGISTER_USER, newUser});\n\n//THUNK CREATORS\nexport const login = (user) => {\n    return dispatch => {\n      axios.post('/api/login', user)\n        .then(res => res.data)\n        .then(user => {\n            dispatch(loginUser(user))\n            history.push(`/users/${user.id}/entries`)\n        },  authError => { \n            dispatch(loginUser({error: authError}))\n        })  \n        .catch(console.error);\n    }\n}\n\nexport const register = (newUser) => {\n    return dispatch => {\n      axios.post('/api/register', newUser)\n        .then(res => res.data)\n        .then(user => {\n          dispatch(registerUser(user))\n          history.push(`/users/${user.id}/entries`)\n        })  \n        .catch(console.error)\n    }\n}  \n\n//REDUCER\nexport default function (state = [], action) {\n    switch (action.type) {\n        case LOGIN_USER:\n            return action.user\n        case REGISTER_USER:\n            return action.newUser\n        default:\n            return state\n    }\n}"]},"metadata":{},"sourceType":"module"}